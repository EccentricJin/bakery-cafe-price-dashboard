# bakery-cafe-price-dashboard

빵집/카페 사장님을 위한 원자재 가격 대시보드

## 수집 기간

2026-02-13 (금) ~ 2026-02-19 (수)

## 추적 원자재 (10종)

| 원자재 | 단위 | 국내 도매가 (2/19 기준) | 추세 |
|--------|------|------------------------|------|
| 밀가루 (박력분) | 원/kg | 750~850 | 하락 -4.0% |
| 설탕 (백설탕) | 원/kg | 800~990 | 하락 -6.0% |
| 무염버터 | 원/kg | 15,500~17,800 | 보합 +1.2% |
| 계란 (특란) | 원/30구 | 5,500~6,400 | 보합 -1.5% |
| 우유 (신선) | 원/L | 1,800~2,200 | 하락 -2.0% |
| 생크림 | 원/L | 8,000~12,000 | 보합 +0.5% |
| 커버춰 초콜릿 | 원/kg | 15,000~24,000 | 하락 -30.6% |
| 커피 원두 (아라비카) | 원/kg | 9,300~24,000 | 하락 -17.4% |
| 바닐라 | 원/병 | 15,100~30,500 | 보합 +0.8% |
| 아몬드 | 원/kg | 15,700~22,200 | 보합 +0.3% |

## 실행 방법

```bash
# 가격 대시보드
npx tsx bakery-cafe-price-dashboard.ts

# 가격 예측 리포트
npx tsx bakery-cafe-price-prediction.ts

# 예측 모델 검증 (2020-2025 6년 백테스트, 612건)
npx tsx validate-prediction-model.ts

# 원자재 트렌드 통합 리포트 (네이버+구글+YouTube API)
npx tsx bakery-ingredient-trend-report.ts
```

## 포함 기능

### 대시보드 (`bakery-cafe-price-dashboard.ts`)
- 10종 원자재 일별 가격 추이 (국제 선물 + 국내 도매가)
- 빵집 원가 시뮬레이션 (식빵 1개)
- 카페 원가 시뮬레이션 (아메리카노 1잔)
- 사장님을 위한 주간 인사이트

### 예측 리포트 (`bakery-cafe-price-prediction.ts`)
- 6개 수학 모델을 활용한 가격 예측
  - 선형회귀 (OLS): `y = ax + b`
  - 지수이동평균 (EMA): `EMA_t = alpha * P_t + (1-alpha) * EMA_{t-1}`
  - 가격 외삽 + 95% 신뢰구간
  - 변동성 분석: `sigma = sqrt(sum((r_i - r_bar)^2) / (N-1))`
  - RSI 모멘텀: `RSI = 100 - 100/(1 + RS)`
  - 요일별 패턴
- 종합 매입 신호 (긴급매수/매수적기/보류/대기)
- 알림 서비스용 JSON 출력 (`--- ALERT_JSON_START/END ---`)

### 모델 검증 (`validate-prediction-model.ts`)
- **2020년 1월 ~ 2025년 12월 (6년, 72개월)** 실제 원자재 가격 기반 대규모 백테스트
- 롤링 윈도우 방식: 최소 4개월 학습 → 다음 달 예측 → 실제값 비교
- 검증 지표: MAPE, 신뢰구간 적중률, 추세 방향 정확도
- **총 612건 예측 검증 완료**

#### 검증 결과 요약 (가중 평균 MAPE: 14.82%)

| 원자재 | MAPE | CI 적중률 | 방향 정확도 | 테스트 수 | 등급 |
|--------|------|-----------|-------------|-----------|------|
| 우유 | 1.39% | 97.1% | 57.4% | 68 | 🟢 Excellent |
| 버터 | 5.60% | 79.4% | 52.9% | 68 | 🟡 Good |
| 계란 | 7.56% | 89.7% | 51.5% | 68 | 🟡 Good |
| 커피 | 14.71% | 66.2% | 55.9% | 68 | 🟠 Fair |
| 코코아 | 15.66% | 61.8% | 60.3% | 68 | 🟠 Fair |
| 설탕 | 16.60% | 63.2% | 54.4% | 68 | 🟠 Fair |
| 아몬드 | 17.59% | 72.1% | 60.3% | 68 | 🟠 Fair |
| 바닐라 | 26.74% | 72.1% | 57.4% | 68 | 🔴 Poor |
| 밀 | 27.51% | 76.5% | 58.8% | 68 | 🔴 Poor |

#### 연도별 MAPE 히트맵 (주요 이벤트 영향)

| 원자재 | 2020 | 2021 | 2022 | 2023 | 2024 | 2025 |
|--------|------|------|------|------|------|------|
| 밀 | 🟢5.8% | 🟡9.3% | 🔴45% | 🟠18% | 🔴51% | 🟡8.2% |
| 코코아 | 🟢4.1% | 🟢3.5% | 🟢4.9% | 🟡9.1% | 🔴52% | 🟠15% |
| 커피 | 🟢5.2% | 🟠19% | 🟡9.8% | 🟢5.1% | 🟠22% | 🟠18% |
| 바닐라 | 🟢3.2% | 🟡7.5% | 🟠15% | 🔴65% | 🟠18% | 🟠14% |

> 📌 **주요 인사이트**: 평상시(안정기)에는 MAPE 3~8%로 우수하나, 구조적 충격(러-우 전쟁 2022, 코코아 공급위기 2024, 커피 서리피해 2021, 바닐라 폭락 2023) 기간에는 정확도 저하. 앱 서비스 적용 시 뉴스 기반 이상 탐지 보완 필요.

### 트렌드 통합 리포트 (`bakery-ingredient-trend-report.ts`)
- 3대 API를 활용한 실시간 원자재 트렌드 수집·분석
  - **네이버 쇼핑 API**: 국내 실제 판매 가격 (최저/평균/중간값/최고, 판매처별)
  - **Google Custom Search API**: 최근 뉴스·기사 트렌드 (가격 동향, 시장 이슈)
  - **YouTube Data API v3**: 관련 영상 트렌드 (조회수, 인기 채널)
- 원자재별 개별 상세 리포트 + 전체 요약 테이블
- 사장님 인사이트 (가격 절약 기회, YouTube 인기도 순위)
- 알림 서비스용 JSON 출력 (`--- TREND_JSON_START/END ---`)

> 📌 `.env` 파일에 API 키 설정 필요: `NAVER_CLIENT_ID`, `NAVER_CLIENT_SECRET`, `GOOGLE_API_KEY`, `GOOGLE_CSE_ID`, `YOUTUBE_API_KEY`

## 데이터 출처

### 일별 가격 (대시보드)
- 국제 선물: Trading Economics, Investing.com, Barchart
- 국내 농산물: KAMIS, aT FIS
- 국내 가공식품: CJ제일제당, 삼양사, 서울우유 공시
- 환율: FRED, Trading Economics

### 월별 가격 (모델 검증, 2020-2025)
- 밀: FRED PWHEAMTUSDM (IMF Global Price, $/MT)
- 설탕: FRED PSUGAISAUSDM (ICE #11, ¢/lb)
- 코코아: FRED PCOCOUSDM (ICE NY, $/MT)
- 커피: FRED PCOFFOTMUSDM (ICE Arabica, ¢/lb)
- 버터: FRED APU0000FS1101 (US retail $/lb, CME 추세 프록시)
- 계란: 축산물품질평가원/KAMIS/한국경제 (특란30구 소매가, 원)
- 우유: 낙농진흥회/서울우유 (소매 기준, 원/L)
- 바닐라: Madagascar FOB benchmark (Tridge/Selinawamucii, $/kg)
- 아몬드: USDA NASS California (grower price, $/lb → $/kg 환산)
